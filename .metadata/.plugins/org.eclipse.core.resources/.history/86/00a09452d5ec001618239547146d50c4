package tic.tac.toe.view;

import java.awt.GridLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.io.IOException;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JMenu;
import javax.swing.JMenuBar;
import javax.swing.JMenuItem;
import javax.swing.JOptionPane;
import javax.swing.JPanel;

import tic.tac.toe.runGame;
import tic.tac.toe.model.board.Board;
import tic.tac.toe.model.player.Player;

public class GUI {
	private static int buttonSelector = 0;
	private static JFrame frame;
	private static JPanel mainPanel;
	private static JButton squareOne, squareTwo, squareThree, squareFour, squareFive, squareSix, squareSeven,
			squareEight, squareNine;
	private static JButton[] buttons;
	private static JMenuItem New, Save, Load, Exit;
	private static JMenu Options;
	private static JMenuBar menuBar;
	private static boolean GameExit;

	public static void initGUI() {
		frame = new JFrame("Tic Tac Toe");
		frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
		frame.setSize(400, 600);
		frame.setLocationRelativeTo(null);
		mainPanel = new JPanel(new GridLayout(0, 3));
		squareOne = new JButton();
		squareTwo = new JButton();
		squareThree = new JButton();
		squareFour = new JButton();
		squareFive = new JButton();
		squareSix = new JButton();
		squareSeven = new JButton();
		squareEight = new JButton();
		squareNine = new JButton();
		buttons = new JButton[] { squareOne, squareTwo, squareThree, squareFour, squareFive, squareSix, squareSeven,
				squareEight, squareNine };
		for (int i = 0; i < buttons.length; i++) {
			mainPanel.add(buttons[i]);
		}
		for (int i = 0; i < buttons.length; i++) {
			buttons[i].addActionListener(new ActionListener() {

				@Override
				public void actionPerformed(ActionEvent e) {
					if (e.getSource() == squareOne)
						setButtonSelector(1);
					else if (e.getSource() == squareTwo)
						setButtonSelector(2);
					else if (e.getSource() == squareThree)
						setButtonSelector(3);
					else if (e.getSource() == squareFour)
						setButtonSelector(4);
					else if (e.getSource() == squareFive)
						setButtonSelector(5);
					else if (e.getSource() == squareSix)
						setButtonSelector(6);
					else if (e.getSource() == squareSeven)
						setButtonSelector(7);
					else if (e.getSource() == squareEight)
						setButtonSelector(8);
					else if (e.getSource() == squareNine)
						setButtonSelector(9);
				}
			});
		}
		New = new JMenuItem("New Game");
		New.addActionListener(new ActionListener() {

			@Override
			public void actionPerformed(ActionEvent e) {
				try {
					runGame.newGame();
				} catch (IOException e1) {
				} catch (InterruptedException e1) {
				}
			}
		});
		Load = new JMenuItem("Load Game");
		Load.addActionListener(new ActionListener() {

			@Override
			public void actionPerformed(ActionEvent e) {
				// TODO Auto-generated method stub

			}
		});
		Save = new JMenuItem("Save Game");
		Save.addActionListener(new ActionListener() {

			@Override
			public void actionPerformed(ActionEvent e) {
				// TODO Auto-generated method stub

			}
		});
		Exit = new JMenuItem("Exit Game");
		Exit.addActionListener(new ActionListener() {

			@Override
			public void actionPerformed(ActionEvent e) {
				// frame.setVisible(false);
				GameExit = true;
			}
		});
		menuBar = new JMenuBar();
		Options = new JMenu("Menu");
		Options.add(New);
		Options.add(Load);
		Options.add(Save);
		Options.add(Exit);
		menuBar.add(Options);
		frame.add(mainPanel);
		frame.setJMenuBar(menuBar);
	}

	/**
	 * @return the gameExit
	 */
	public static boolean isGameExit() {
		return GameExit;
	}

	public static void buttonUpdater(Board gameBoard, Player playerX) {
		for (int i = 0; i < buttons.length; i++) {
			if (gameBoard.getBoardspaces()[i].getSymbol() instanceof Player) {
				if (gameBoard.getBoardspaces()[i].getSymbol() == playerX) {
					buttons[i].setText("X");
				} else {
					buttons[i].setText("O");
				}
			}
		}
	}

	public static void PlayersTurn(Player playerX) {
		if (playerX.isTurn())
			JOptionPane.showMessageDialog(frame, "Player X's turn");
		else
			JOptionPane.showMessageDialog(frame, "Player O's turn");

	}

	public static void displayMessageDialog(String message) {
		JOptionPane.showMessageDialog(frame, message);
	}

	public static void showGUI() {
		frame.setVisible(true);
		GameExit = false;
	}

	/**
	 * @return the buttonSelector
	 */
	public static int getButtonSelector() {
		return buttonSelector;
	}

	/**
	 * @param buttonSelector
	 *            the buttonSelector to set
	 */
	public static void setButtonSelector(int buttonSelector) {
		GUI.buttonSelector = buttonSelector;
	}
}
