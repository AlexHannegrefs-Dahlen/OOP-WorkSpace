package edu.neumont.csc150.messageinterface.controller;

import java.io.File;
import java.io.IOException;

import edu.neumont.csc150.messageinterface.view.MessageUI;
import edu.neumont.csc150.myClass.messageMaker;

public class MessageApp {

	public class UserAction {
		public static final int EXIT = 0;
		public static final int CREATE_MESSAGE = 1;
		public static final int SET_SUBJECT = 2;
		public static final int SET_BODY = 3;
		public static final int ADD_RECIPIENT = 4;
		public static final int ADD_ATTACHMENT = 5;
		public static final int DISPLAY_MESSAGE = 6;
		// public static final int SEND = 7;
		public static final int COUNT_OF_USER_ACTIONS = 7;
	}

	private MessageUI ui = new MessageUI();

	private messageMaker msg;

	private String fromEmail;

	private boolean isExitTime = false;
	public void run() throws IOException {
		// get a username
		this.setFromEmail(ui.getFromEmailFromUser());
		while (isExitTime) {
			// get user's selection
			int selection = ui.getMainMenuSelection();
			// handle selection(create message, set sender, subject, body, add
			this.handleUserSelection(selection);
			// recipts, add attachments, send
			// future (store prev message
		}

	}

	private void handleUserSelection(int selection) {
		switch(selection){
		case UserAction.EXIT:
			isExitTime = true;
			break;
		case UserAction.CREATE_MESSAGE:
			this.msg = new messageMaker();
			break;
		case UserAction.SET_SUBJECT:
			this.handleSetSubject();
			break;
		case UserAction.SET_BODY:
			this.handleSetBody();
			break;
		case UserAction.ADD_RECIPIENT:
			this.handleAddRecipient();
			break;
		case UserAction.ADD_ATTACHMENT:
			this.handleAddAttachment();
			break;
		case UserAction.DISPLAY_MESSAGE:
			ui.displayString(this.msg.toString());
			break;
		default:
			throw new IllegalArgumentException("unrecognized selection: " + selection);
		}
		
	}

	private void handleAddAttachment() {
		File attachment = new File(ui.getAttachmentFile());
		this.msg.addAttachment(attachment);
	}

	private void handleAddRecipient() {
		this.msg.addRecipient(ui.getRecipient());
	}

	private void handleSetBody() {
		this.msg.setMessageBody(ui.getMessageBody());
	}

	private void handleSetSubject() {
		this.msg.setSubject(ui.getMessageSubject());
	}

	/**
	 * @return the username
	 */
	public String getFromEmail() {
		return fromEmail;
	}

	/**
	 * @param fromEmail
	 *            the username to set
	 */
	public void setFromEmail(String fromEmail) {
		if (fromEmail == null) {

		}
		if (fromEmail.length() == 0) {

		}
		this.fromEmail = fromEmail;
	}

}
